---
/** Grille des 3 services + section Pourquoi nous choisir (design React) */
import AnimateInView from './AnimateInView.astro'
import Card from './ui/Card.astro'

interface Service {
  title: string
  description: string
  features: [string, string, string, string]
  icon: 'building' | 'shield' | 'file'
  colorClass: string
  bgClass: string
  hoverBorderClass: string
  badge?: string
}

interface Props {
  locale: 'fr' | 'en'
}
const { locale } = Astro.props

const services: Service[] =
  locale === 'fr'
    ? [
        {
          title: 'Intermédiaire en Banque',
          description: 'Solutions bancaires complètes avec agrément BCEAO',
          features: ['Agrément BCEAO N° ML00009/2024', 'Crédit professionnel et personnel', 'Gestion de patrimoine', 'Conseil en financement'],
          icon: 'building',
          colorClass: 'text-blue-400',
          bgClass: 'bg-blue-400/10',
          hoverBorderClass: 'hover:border-blue-400/20',
          badge: 'Agrément BCEAO N° ML00009/2024',
        },
        {
          title: 'Intermédiaire en Assurance',
          description: 'Mandataire indépendant pour toutes vos assurances',
          features: ['Mandataire indépendant', 'Assurance vie et santé', 'Assurance auto et habitation', 'Protection entreprise'],
          icon: 'shield',
          colorClass: 'text-emerald-400',
          bgClass: 'bg-emerald-400/10',
          hoverBorderClass: 'hover:border-emerald-400/20',
          badge: 'Mandataire Indépendant',
        },
        {
          title: "Bureau d'Études",
          description: 'Expertise stratégique et analyse institutionnelle',
          features: ['Études de marché', 'Conseil stratégique', 'Analyse institutionnelle', 'Montage de projets'],
          icon: 'file',
          colorClass: 'text-purple-400',
          bgClass: 'bg-purple-400/10',
          hoverBorderClass: 'hover:border-purple-400/20',
        },
      ]
    : [
        {
          title: 'Banking Intermediary',
          description: 'Complete banking solutions with BCEAO accreditation',
          features: ['BCEAO Accreditation N° ML00009/2024', 'Professional and personal credit', 'Wealth management', 'Financing advice'],
          icon: 'building',
          colorClass: 'text-blue-400',
          bgClass: 'bg-blue-400/10',
          hoverBorderClass: 'hover:border-blue-400/20',
          badge: 'BCEAO Accreditation N° ML00009/2024',
        },
        {
          title: 'Insurance Intermediary',
          description: 'Independent agent for all your insurance needs',
          features: ['Independent agent', 'Life and health insurance', 'Auto and home insurance', 'Business protection'],
          icon: 'shield',
          colorClass: 'text-emerald-400',
          bgClass: 'bg-emerald-400/10',
          hoverBorderClass: 'hover:border-emerald-400/20',
          badge: 'Independent Agent',
        },
        {
          title: 'Consulting Office',
          description: 'Strategic expertise and institutional analysis',
          features: ['Market research', 'Strategic consulting', 'Institutional analysis', 'Project structuring'],
          icon: 'file',
          colorClass: 'text-purple-400',
          bgClass: 'bg-purple-400/10',
          hoverBorderClass: 'hover:border-purple-400/20',
        },
      ]

const whyTitle = locale === 'fr' ? 'Pourquoi nous choisir ?' : 'Why choose us?'
const whyItems =
  locale === 'fr'
    ? [
        { title: 'Expertise Locale', desc: 'Connaissance approfondie du marché malien et des réglementations BCEAO' },
        { title: 'Solutions Sur Mesure', desc: 'Conseil personnalisé adapté à vos besoins spécifiques' },
        { title: 'Réseau Étendu', desc: 'Partenariats avec les principales institutions financières' },
        { title: 'Accompagnement Total', desc: 'Suivi personnalisé de A à Z dans tous vos projets' },
      ]
    : [
        { title: 'Local Expertise', desc: 'In-depth knowledge of the Malian market and BCEAO regulations' },
        { title: 'Tailored Solutions', desc: 'Personalised advice adapted to your specific needs' },
        { title: 'Extended Network', desc: 'Partnerships with major financial institutions' },
        { title: 'Full Support', desc: 'Personalised follow-up from A to Z in all your projects' },
      ]
---
<!-- Services grid -->
<section class="bg-gradient-to-b from-black to-[#0A1929] py-20">
  <div class="container mx-auto px-4 lg:px-8">
    <div class="grid grid-cols-1 gap-8 lg:grid-cols-3">
      {services.map((service, index) => (
        <AnimateInView stagger={index as 0 | 1 | 2}>
          <Card class={`h-full border-gray-800 transition-all duration-300 ${service.hoverBorderClass}`}>
            <div class={`mb-4 flex h-16 w-16 items-center justify-center rounded-lg ${service.bgClass}`}>
              {service.icon === 'building' && (
                <svg xmlns="http://www.w3.org/2000/svg" class={`h-8 w-8 ${service.colorClass}`} width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <path d="M2 20V8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12" />
                  <path d="M10 20V14a2 2 0 0 0-2-2 2 2 0 0 0-2 2v6" />
                  <path d="M10 20h4" />
                  <path d="M18 20V14a2 2 0 0 0-2-2 2 2 0 0 0-2 2v6" />
                  <path d="M18 20h4" />
                  <path d="M2 12h20" />
                </svg>
              )}
              {service.icon === 'shield' && (
                <svg xmlns="http://www.w3.org/2000/svg" class={`h-8 w-8 ${service.colorClass}`} width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                </svg>
              )}
              {service.icon === 'file' && (
                <svg xmlns="http://www.w3.org/2000/svg" class={`h-8 w-8 ${service.colorClass}`} width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z" />
                  <polyline points="14 2 14 8 20 8" />
                  <line x1="16" x2="8" y1="13" y2="13" />
                  <line x1="16" x2="8" y1="17" y2="17" />
                  <line x1="10" x2="8" y1="9" y2="9" />
                </svg>
              )}
            </div>
            <h2 class="mb-2 text-2xl font-semibold text-white">{service.title}</h2>
            <p class="mb-6 text-gray-400">{service.description}</p>
            <ul class="space-y-3">
              {service.features.map((feature) => (
                <li class="flex items-start gap-3">
                  <svg xmlns="http://www.w3.org/2000/svg" class={`mt-0.5 h-5 w-5 shrink-0 ${service.colorClass}`} width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
                    <polyline points="22 4 12 14.01 9 11.01" />
                  </svg>
                  <span class="text-sm text-gray-300">{feature}</span>
                </li>
              ))}
            </ul>
            {service.badge && (
              <div class="mt-6 border-t border-gray-800 pt-6">
                <span class="inline-flex items-center rounded-full bg-[#4CAF50] px-3 py-1 text-xs font-medium text-white">
                  {service.badge}
                </span>
              </div>
            )}
          </Card>
        </AnimateInView>
      ))}
    </div>
  </div>
</section>

<!-- Why Choose Us -->
<section class="bg-[#0A1929] py-20">
  <div class="container mx-auto px-4 lg:px-8">
    <AnimateInView variant="slow">
      <div class="mx-auto max-w-4xl">
        <Card class="border-0 bg-gradient-to-br from-[#0D2137] to-[#0A1929] p-8 md:p-12">
          <h2 class="mb-8 text-center text-3xl font-bold text-white">{whyTitle}</h2>
          <div class="grid gap-6 md:grid-cols-2">
            {whyItems.map((item) => (
              <div class="flex items-start gap-4">
                <div class="mt-2 h-2 w-2 shrink-0 rounded-full bg-[#4CAF50]" aria-hidden="true" />
                <div>
                  <h3 class="mb-2 font-semibold text-white">{item.title}</h3>
                  <p class="text-sm text-gray-400">{item.desc}</p>
                </div>
              </div>
            ))}
          </div>
        </Card>
      </div>
    </AnimateInView>
  </div>
</section>
